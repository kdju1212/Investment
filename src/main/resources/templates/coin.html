<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ì‹¤ì‹œê°„ ì½”ì¸ê°€ê²©</title>
<style>
body {
	font-family: sans-serif;
	background: #f8f8f8;
	padding: 2rem;
}

.coin-price {
	margin-bottom: 1rem;
	font-size: 1.5rem;
}
</style>
</head>
<body>

	<h1>ğŸ“Š ì‹¤ì‹œê°„ ì½”ì¸ê°€ê²©</h1>

	<div id="KRW-BTC" class="coin-price">BTC: ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
	<div id="KRW-ETH" class="coin-price">ETH: ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
	<div id="KRW-XRP" class="coin-price">XRP: ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>

	<script>
    // âœ… WebSocketì´ ì•„ë‹Œ EventSource ì‚¬ìš©!
    const eventSource = new EventSource("/price-stream");

    eventSource.onmessage = (event) => {
      // ì„œë²„ì—ì„œ {"code":"KRW-BTC", "price":"â‚©97,300,000"} í˜•íƒœì˜ JSONì´ ì˜¤ë¯€ë¡œ
      const message = JSON.parse(event.data);

      const target = document.getElementById(message.code);
      if (target) {
        target.textContent = `${message.code.replace("KRW-", "")}: ${message.price}`;
      }
    };

    eventSource.onerror = (err) => {
      console.error("SSE ì—°ê²° ì˜¤ë¥˜", err);
    };
  </script>
</body>
</html>
