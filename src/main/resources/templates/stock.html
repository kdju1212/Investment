<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ì‹¤ì‹œê°„ ì£¼ì‹ ê°€ê²©</title>
<style>
body {
	font-family: sans-serif;
	background: #f8f8f8;
	padding: 2rem;
}

h1 {
	font-size: 2rem;
	margin-bottom: 1.5rem;
}

.stock-price {
	margin-bottom: 1rem;
	font-size: 1.5rem;
}
</style>
</head>
<body>

	<h1>ğŸ“ˆ ì‹¤ì‹œê°„ ì£¼ì‹ ê°€ê²©</h1>

	<div id="005930" class="stock-price">ì‚¼ì„±ì „ì: ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
	<div id="000660" class="stock-price">SKí•˜ì´ë‹‰ìŠ¤: ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
	<div id="035420" class="stock-price">NAVER: ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>

	<script>
    const codeToName = {
      "005930": "ì‚¼ì„±ì „ì",
      "000660": "SKí•˜ì´ë‹‰ìŠ¤",
      "035420": "NAVER"
    };

    const eventSource = new EventSource("/stock-stream");

    eventSource.onmessage = (event) => {
      const data = JSON.parse(event.data); // { code: "005930", price: "53,750" }

      const name = codeToName[data.code] || data.code;
      const target = document.getElementById(data.code);

      if (target) {
        target.textContent = `${name}: ${data.price}ì›`;
      }
    };

    eventSource.onerror = (err) => {
      console.error("SSE ì—°ê²° ì˜¤ë¥˜", err);
    };
  </script>
</body>
</html>
